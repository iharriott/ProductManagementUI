<div *ngIf="dataSource.data.length > 0">
    <!-- <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Select Revision</mat-label>
        <mat-select
            [(ngModel)]="selectedBranch"
            name="exportType"
            (selectionChange)="onBranchChange()"
        >
            <mat-option
                *ngFor="let branch of branchList"
                [value]="branch"
                class="button-width"
            >
                {{ branch }}
            </mat-option>
        </mat-select>
    </mat-form-field> -->

    <div>
        <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Filter</mat-label>
            <input
                matInput
                (keyup)="applyFilter($event)"
                placeholder="fiter value"
                #input
            />
        </mat-form-field>
    </div>

    <button
        mat-raised-button
        color="primary"
        (click)="onSelect()"
        class="button-width button-position"
    >
        <mat-icon *ngIf="view !== 'edit'">visibility</mat-icon>
        View Details
    </button>

    <!-- <button
        mat-raised-button
        color="primary"
        (click)="toggleTableRows()"
        class="button-width-load"
    >
        Show All Products
    </button> -->

    <p class="text-font">Viewing History for File: {{ fileName }}</p>

    <!-- <button
        mat-raised-button
        color="primary"
        (click)="onSelect()"
        class="button-width button-position"
    >
        <mat-icon *ngIf="view === 'edit'">edit</mat-icon>
        <mat-icon *ngIf="view !== 'edit'">visibility</mat-icon>
        {{ buttonLabel }}
    </button> -->
</div>

<!-- <div *ngIf="dataSource.data.length > 0"> -->
<div class="mat-elevation-z8">
    <!-- <div *ngIf="!branchLoadComplete">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </div> -->

    <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
        <!-- version Column -->
        <!-- <ng-container matColumnDef="version">
            <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
                class="table-column-header"
            >
                Version
            </th>
            <td mat-cell *matCellDef="let row" class="row-width-dt">
                {{ row.version }}
            </td>
        </ng-container> -->

        <!-- state Column -->
        <!-- <ng-container matColumnDef="author">
            <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
                class="table-column-header"
            >
                Author
            </th>
            <td mat-cell *matCellDef="let row" class="row-width-dt">
                {{ row.author }}
            </td>
        </ng-container> -->

        <!-- comment Column -->
        <!-- <ng-container matColumnDef="comment">
            <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
                class="table-column-header"
            >
                Comment
            </th>
            <td mat-cell *matCellDef="let row" class="row-width">
                {{ row.comment }}
            </td>
        </ng-container> -->

        <!-- lastUpdated Column -->
        <!-- <ng-container matColumnDef="lastUpdated">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Last Updated
            </th>
            <td mat-cell *matCellDef="let row">{{ row.lastUpdated }}</td>
        </ng-container> -->

        <!-- Effective Date Column -->
        <!-- <ng-container matColumnDef="effectiveDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Effective Date
            </th>
            <td mat-cell *matCellDef="let row">{{ row.effectiveDate }}</td>
        </ng-container> -->

        <!-- Effective Date Column -->
        <!-- <ng-container matColumnDef="renewalDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Renewal Date
            </th>
            <td mat-cell *matCellDef="let row">{{ row.renewalDate }}</td>
        </ng-container> -->
        <ng-container matColumnDef="fileVersionId">
            <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
                class="table-column-header"
            >
                File Version ID
            </th>
            <td class="col-width-3" mat-cell *matCellDef="let row">
                {{ row.fileVersionId }}
            </td>
        </ng-container>

        <ng-container matColumnDef="isLatestVersion">
            <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
                class="table-column-header"
            >
                Is Latest Version
            </th>
            <td class="col-width-2" mat-cell *matCellDef="let row">
                {{ row.isLatestVersion }}
            </td>
        </ng-container>

        <ng-container matColumnDef="fileContent">
            <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
                class="table-column-header"
            >
                File Content
            </th>
            <td class="col-width-2" mat-cell *matCellDef="let row">
                {{ row.fileContent }}
            </td>
        </ng-container>

        <ng-container matColumnDef="expandedDetail">
            <td
                mat-cell
                *matCellDef="let row"
                [attr.colspan]="displayedColumns.length"
            >
                <div
                    class="row example-element-detail"
                    [@detailExpand]="row.isExpanded ? 'expanded' : 'collapsed'"
                >
                    <table>
                        <tr class="th-center table-column-header">
                            <th>Version</th>
                            <th>Author</th>
                            <th>Comment</th>
                            <th>Last Updated Date</th>
                            <th>Effective Date</th>
                            <th>Renewal Date</th>
                        </tr>

                        <tr *ngFor="let data of row.data">
                            <td class="col-width-2">{{ data.version }}</td>
                            <td class="col-width-2">
                                {{ data.author | stringReduce }}
                            </td>
                            <td class="col-width-2">
                                {{ data.comment | stringReduce }}
                            </td>
                            <td class="col-width">
                                {{ data.lastUpdated | dataFormatter }}
                            </td>
                            <td class="col-width">
                                {{ data.effectiveDate | dataFormatter }}
                            </td>
                            <td class="col-width">
                                {{ data.renewalDate | dataFormatter }}
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="action">
            <th
                mat-header-cell
                class="th-center table-column-header"
                *matHeaderCellDef
                style="justify-content: left"
            >
                Action
            </th>
            <td mat-cell *matCellDef="let row">
                <!-- <a mat-button (click)="loadData(row)">Load Details</a> -->

                <mat-checkbox class="table-column-header" (click)="onClick(row)"
                    >View Data
                </mat-checkbox>

                <a
                    *ngIf="row.data.length > 0"
                    mat-button
                    href="javascript:void()"
                    (click)="row.isExpanded = !row.isExpanded"
                    >Show Products</a
                >

                <!-- <button mat-button color="primary" (click)="viewHistory(row)">
                    View History
                </button>-->
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns"
            class="example-element-row"
            [class.data-expanded-row]="row.isExpanded"
        ></tr>

        <tr
            mat-row
            *matRowDef="let row; columns: ['expandedDetail']"
            class="data-detail-row"
        ></tr>
    </table>
    <div *ngIf="dataSource.data.length === 0" class="center">
        <mat-spinner class="wrapper" style="margin: 0 auto"></mat-spinner>
    </div>

    <!-- <table>
        <tr *ngIf="!dataSource.data?.length">
            <td
                style="text-align: center"
                [attr.colspan]="displayedColumns?.length"
            >
                No Records Found!
            </td>
        </tr>
    </table> -->
    <div class="row" style="background-color: none; min-width: 900px">
        <div class="col-md-6" *ngIf="dataSource.data.length > 0">
            <button mat-button color="primary" (click)="goBack()">
                <mat-icon>fast_rewind</mat-icon>
                Back
            </button>
        </div>
        <div class="col-md-6">
            <mat-paginator
                [hidden]="!dataSource.data.length"
                [pageSizeOptions]="[5, 10, 25, 100]"
                aria-label="Select page of
                files"
            >
            </mat-paginator>
        </div>
    </div>
</div>
<!-- </div> -->
