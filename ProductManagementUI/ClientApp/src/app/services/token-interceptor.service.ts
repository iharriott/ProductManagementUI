import {
    HttpEvent,
    HttpHandler,
    HttpInterceptor,
    HttpRequest
} from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';

@Injectable({
    providedIn: 'root'
})
export class TokenInterceptorService implements HttpInterceptor {
    constructor() {}
    intercept(
        req: HttpRequest<any>,
        next: HttpHandler
    ): Observable<HttpEvent<any>> {
        let token = localStorage.getItem('access_token');
        console.log(token);
        // let token =
        //     'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJodHRwczovL2dlaWNvMzY1Lm9ubWljcm9zb2Z0LmNvbS81MWE0ZWUyZC0yN2M0LTQyNWYtOTU0Mi1iMGY1MTE3ZjAwZTEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83Mzg5ZDhjMC0zNjA3LTQ2NWMtYTY5Zi03ZDQ0MjY1MDI5MTIvIiwiaWF0IjoxNjY2ODEyMjg0LCJuYmYiOjE2NjY4MTIyODQsImV4cCI6MTY2NjgxNzE1NiwiYWNyIjoiMSIsImFpbyI6IkFWUUFxLzhUQUFBQTVTK3krVFNiaHJoUDlqajZhbWZVbXZHOXZRT0xtVTV3QXdrOWlrUHMxU1FSSWkvdkVrZHFvM3Zkb1hzZlI1NUQ5Ym9rNStUckptaUpGaFNzQ292ay9Xc0xhdE5uU3pyT0w5NGExQWN5aFg4PSIsImFtciI6WyJwd2QiLCJyc2EiLCJtZmEiXSwiYXBwaWQiOiIyZDVkY2I1OC0xNjI1LTRlMDktOTAyMi1iZmI2ZGVjY2M0MDMiLCJhcHBpZGFjciI6IjAiLCJkZXZpY2VpZCI6IjkxNzJiYzNmLTJiOGMtNDEyYy05YTNhLTE4NTk0ODMyMjA5MiIsImZhbWlseV9uYW1lIjoiQmV0aGFuYXNhbXkiLCJnaXZlbl9uYW1lIjoiUG90aGlyYWoiLCJpcGFkZHIiOiIxMi4zMy4zNS4xMjEiLCJuYW1lIjoiQmV0aGFuYXNhbXksIFBvdGhpcmFqIiwib2lkIjoiMmMwMmYyZmYtOWM0Yy00NzlmLThhYjAtYjllNjU1Yjk5ZDJjIiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTIyMDUyMzM4OC0xNDU0NDcxMTY1LTE4MDE2NzQ1MzEtMTQwNDUwOCIsInJoIjoiMC5BU2NBd05pSmN3YzJYRWFtbjMxRUpsQXBFbGpMWFMwbEZnbE9rQ0tfdHQ3TXhBTW5BRWsuIiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoiQ1RRaXhIVXo2OWI3cEhqNm1VcjF1dE9KSlljNHY0dS03MnBndXdITDdUOCIsInRpZCI6IjczODlkOGMwLTM2MDctNDY1Yy1hNjlmLTdkNDQyNjUwMjkxMiIsInVuaXF1ZV9uYW1lIjoiUEJldGhhbmFzYW15QGdlaWNvLmNvbSIsInVwbiI6IlBCZXRoYW5hc2FteUBnZWljby5jb20iLCJ1dGkiOiJqZjh4dDlvbUFrMnFUNmt5Vll1a0FBIiwidmVyIjoiMS4wIn0.BxW0-Ta_hK5iLAr9egr8XReM27Aa_bqk6klvsyCsiheHJOBM71TxZmtXZ8Z5rdr0NvcJNkaDe0nohUCJg2X4xAmqObhsQeCtsVh-w1MlqpPVEcv0xE4gYz9b3s99ktZ7g0hMHti2fgFOKWqaE0JRm2ypo4JYJKUIRJNMkrXRr8w1qlucAud0cSP8fBDrGJdnS9ztJMg6R47mi8PavfhpQzq-2un8LhaqKWhmxRF4o3A4C1eQJjrtGTJicibtvoZ4mdyv9dJniHi6dM1Ie0XPA3ErioRh63e98g4SOgWc7WLV2S2xC6kxvnymjmoVAgN1bQBW7AvZyzlBYLklLn9SIA';
        // let token =
        //     'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiIyZDVkY2I1OC0xNjI1LTRlMDktOTAyMi1iZmI2ZGVjY2M0MDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vNzM4OWQ4YzAtMzYwNy00NjVjLWE2OWYtN2Q0NDI2NTAyOTEyL3YyLjAiLCJpYXQiOjE2NjY4MTMxNDksIm5iZiI6MTY2NjgxMzE0OSwiZXhwIjoxNjY2ODE3MDQ5LCJhaW8iOiJBVVFBdS84VEFBQUFOaDVEdGF4aWNhYktXTzVlOW9UeVNXRk93UThVUEE2THc4MHZjWTh4ekFHVGdJYkpsSTF6VXhRU052Q3hXOUY1T0w3Ujh2NnJtY05ENnlSWkZ5d1Jndz09IiwibmFtZSI6IkhhcnJpb3R0LCBJYW4oQ29udHJhY3RvcikiLCJub25jZSI6IjIzMzFiZWE2LTlhNTktNGY1My1hZmYxLTVhMjVmNGUwM2Q0NCIsIm9pZCI6ImM3OTg0MjdiLWFkMjctNDZmYy05ZDkwLTdmNzdkNGY3ZmNkOCIsInByZWZlcnJlZF91c2VybmFtZSI6IklIYXJyaW90dEBnZWljby5jb20iLCJyaCI6IjAuQVNjQXdOaUpjd2MyWEVhbW4zMUVKbEFwRWxqTFhTMGxGZ2xPa0NLX3R0N014QU1uQUxJLiIsInN1YiI6IkJidVRGY0RUdVhBNnBLakI5SHl3UzVGUXFzRGo5TjNHWGdWZ09aN2o3dmciLCJ0aWQiOiI3Mzg5ZDhjMC0zNjA3LTQ2NWMtYTY5Zi03ZDQ0MjY1MDI5MTIiLCJ1dGkiOiJveFJ6MmxtQktFS0VENFM2Y2ZPdkFBIiwidmVyIjoiMi4wIn0.iOksBY6zmog0nn5tixH7llDaQCWzmBMuvs3YrHKUdX0Fp22mchKcrdp97t7RVKRWG2v3MRo5jlaECATVMkaM_n-4nTuMHOCEbJZc6ZMNuw8EXzfYs48NK18r35vba31GTv4am1XliQM3vf3vlSJ7bUjHXPqe-p-YA4D7h2Okx2-cIXx41vL19oBECzgUh3Z2mOwKXhYDDf6PXYsfVypmL6Fl2R77AXfVoW_ZqhE44DphZw127Ovg7MGN54tCUxlnxRxLw7pNfb2gsd202NedXbL0_dzi5Z1fyJnkXnZtO90Vr_P5biR75jAlT7lSRLyHm9E4CYdnjJxiIeHG9hcoRw","idToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiIyZDVkY2I1OC0xNjI1LTRlMDktOTAyMi1iZmI2ZGVjY2M0MDMiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vNzM4OWQ4YzAtMzYwNy00NjVjLWE2OWYtN2Q0NDI2NTAyOTEyL3YyLjAiLCJpYXQiOjE2NjY4MTMxNDksIm5iZiI6MTY2NjgxMzE0OSwiZXhwIjoxNjY2ODE3MDQ5LCJhaW8iOiJBVVFBdS84VEFBQUFOaDVEdGF4aWNhYktXTzVlOW9UeVNXRk93UThVUEE2THc4MHZjWTh4ekFHVGdJYkpsSTF6VXhRU052Q3hXOUY1T0w3Ujh2NnJtY05ENnlSWkZ5d1Jndz09IiwibmFtZSI6IkhhcnJpb3R0LCBJYW4oQ29udHJhY3RvcikiLCJub25jZSI6IjIzMzFiZWE2LTlhNTktNGY1My1hZmYxLTVhMjVmNGUwM2Q0NCIsIm9pZCI6ImM3OTg0MjdiLWFkMjctNDZmYy05ZDkwLTdmNzdkNGY3ZmNkOCIsInByZWZlcnJlZF91c2VybmFtZSI6IklIYXJyaW90dEBnZWljby5jb20iLCJyaCI6IjAuQVNjQXdOaUpjd2MyWEVhbW4zMUVKbEFwRWxqTFhTMGxGZ2xPa0NLX3R0N014QU1uQUxJLiIsInN1YiI6IkJidVRGY0RUdVhBNnBLakI5SHl3UzVGUXFzRGo5TjNHWGdWZ09aN2o3dmciLCJ0aWQiOiI3Mzg5ZDhjMC0zNjA3LTQ2NWMtYTY5Zi03ZDQ0MjY1MDI5MTIiLCJ1dGkiOiJveFJ6MmxtQktFS0VENFM2Y2ZPdkFBIiwidmVyIjoiMi4wIn0.iOksBY6zmog0nn5tixH7llDaQCWzmBMuvs3YrHKUdX0Fp22mchKcrdp97t7RVKRWG2v3MRo5jlaECATVMkaM_n-4nTuMHOCEbJZc6ZMNuw8EXzfYs48NK18r35vba31GTv4am1XliQM3vf3vlSJ7bUjHXPqe-p-YA4D7h2Okx2-cIXx41vL19oBECzgUh3Z2mOwKXhYDDf6PXYsfVypmL6Fl2R77AXfVoW_ZqhE44DphZw127Ovg7MGN54tCUxlnxRxLw7pNfb2gsd202NedXbL0_dzi5Z1fyJnkXnZtO90Vr_P5biR75jAlT7lSRLyHm9E4CYdnjJxiIeHG9hcoRw';

        let jwttoken = req.clone({
            setHeaders: {
                Authorization: `bearer ${token}`
            }
        });
        return next.handle(jwttoken);
    }
}
